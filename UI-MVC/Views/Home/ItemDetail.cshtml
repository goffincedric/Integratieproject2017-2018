@model PB.BL.Domain.Items.Item

@{
  Layout = "~/Views/Shared/_Layout.cshtml";
}


<main class="main-content bgc-grey-100">
  <div id="mainContent" class="container-fluid">

    <div style="margin: 10px 0;padding:0;" class="masonry-item col-md-12">
      <div class="bgc-white p-20 bd">


        <div class="container-fluid">
          <div class="row">
            <div class="col-3">
              <img style="width: 200px; margin-top:20px;" src="~/Content/Images/nva.jpg" alt="logo" />
            </div>

            <div class="col-9">
              <div class="h-75 w-100">
                <div class="row" style="margin:0; text-align:center;">
                  <h1 style="color: #2196f3; text-align: center; padding-top: 3%; width:100%;" class="display-4"> @Html.DisplayFor(model => model.Name)</h1>
                </div>
                <div class="row">
                  @if (Model is PB.BL.Domain.Items.Person)
                  {
                    <ul style="list-style-type:none; width:100%; text-align:center;">
                      <li style="display:inline-block;"><h5 class="h5">@ViewBag.Vermeldingen Vermeldingen</h5></li>
                      <li style="display:inline-block;"> <h5 class="h5">-</h5> </li>
                      <li style="display:inline-block;"><h5 class="h5">Partijnaam</h5></li>

                    </ul>
                  }
                  else if (Model is PB.BL.Domain.Items.Organisation)
                  {
                    <h4 class="h4">@ViewBag.Leden Leden</h4>
                  }
                  else
                  {
                    <h4 class="h4">@ViewBag.Associaties Associaties</h4>
                  }
                </div>

              </div>
              <div class="h-25 w-100 d-inline-block">

                @if (ViewBag.Subscribed)
                {
                  using (Html.BeginForm("RemoveSubscription", "Home", new { Id = Model.ItemId }, FormMethod.Post))
                  {
                    @Html.AntiForgeryToken()
                    <button type="submit" value="Unsubscribe" class="btn btn-danger btn-lg btn-block">Unsubscribe</button>
                  }
                }
                else
                {
                  using (Html.BeginForm("AddSubscription", "Home", new { Id = Model.ItemId }, FormMethod.Post))
                  {
                    @Html.AntiForgeryToken()
                    <button type="submit" value="Subscribe me!" class="btn btn-outline-primary btn-lg btn-block">Subcribe!</button>
                  }

                }
              </div>
            </div>


          </div>
        </div>
      </div>



      <div class="row" style="margin-top: 10px;">

        <div class="col-sm">
          <div class="layers bd bgc-white p-20">
            <div class="layer w-100 mB-10">
              <h6 class="lh-1">Populariteit</h6>
            </div>
            <div class="layer w-100">
              <div class="peers ai-sb fxw-nw">
                <div class="peer peer-greed"><span id="sparklinedash4"></span></div>
                <div class="peer"><span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-blue-50 c-blue-500">+10%</span></div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm">
          <div class="layers bd bgc-white p-20">
            <div class="layer w-100 mB-10">
              <h6 class="lh-1">Positiviteit</h6>
            </div>
            <div class="layer w-100">
              <div class="peers ai-sb fxw-nw">
                <div class="peer peer-greed"><span id="sparklinedash"></span></div>
                <div class="peer"><span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-green-50 c-green-500">+3%</span></div>
              </div>
            </div>
          </div>
        </div>


        <div class="col-sm">
          <div class="layers bd bgc-white p-20">
            <div class="layer w-100 mB-10">
              <h6 class="lh-1">Activiteit</h6>
            </div>
            <div class="layer w-100">
              <div class="peers ai-sb fxw-nw">
                <div class="peer peer-greed"><span id="sparklinedash2"></span></div>
                <div class="peer"><span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-red-50 c-red-500">-7%</span></div>
              </div>
            </div>
          </div>
        </div>

      </div>


      <canvas width="800" height="600" id="mycanvas"></canvas>

    </div>

</main>

<script src="https://nodebox.live/api/v1/ndbx.js"></script>

<script>
  var itemid = @Html.Raw(Model.ItemId);

  var tmp = "";
    tmp = $.ajax({
      async:false,
      type: 'GET',
      dataType: 'json',
      url: "https://localhost:44342/api/item/getrecordsfromperson/" + itemid
  }).responseJSON;

  var options = {
    userId: 'ThomasVerhoeven',
    projectId: 'sparkline',
    functionId:'main',
      canvasId: 'mycanvas'
  };

  ndbx.embed(options,
    function(err, player) {
      if (err) {
        console.log('Load error:', err);
      } else {
        window.player = player;
          console.log(tmp.toString());
          player.setValue('datareader', 'v', tmp);
          player.start();
          //player.stop();
      }
    });

</script>

@*<script>
      var score = document.getElementById("scoreCounter");
      score.innerHTML = "0";
      var scoreValue = 0;
      checkScore();

      function upVote() {
          scoreValue++;
          score.innerHTML = scoreValue;
          checkScore();
      }

      function downVote() {
          scoreValue--;
          score.innerHTML = scoreValue;
          checkScore();
      }

      function checkScore() {
          if (scoreValue < 0) {
              score.style.color = "#FF586C";
          } else if (scoreValue > 0) {
              score.style.color = "#6CC576";
          } else {
              score.style.color = "#666666";
          }
      }
  </script>*@